/*Version 1.0.135.0*/GOM01 = window.GOM01 || {}, function (n) { function u() { VIS.CalloutEngine.call(this, "GOM01.SetBOM") } function f() { VIS.CalloutEngine.call(this, "GOM01.Payment") } function e() { VIS.CalloutEngine.call(this, "GOM01.CashJournal") } function o() { VIS.CalloutEngine.call(this, "GOM01.TestDescription") } function s() { VIS.CalloutEngine.call(this, "GOM01.GetUom") } function h() { VIS.CalloutEngine.call(this, "GOM01.ShipDescription") } function r() { VIS.CalloutEngine.call(this, "GOM01.CalloutProductionOrder") } function i() { VIS.CalloutEngine.call(this, "GOM01.CalloutProductionExecution") } function c() { VIS.CalloutEngine.call(this, "GOM01.GetProductCode") } function l() { VIS.CalloutEngine.call(this, "GOM01.GetCostMethod") } function a() { VIS.CalloutEngine.call(this, "GOM01.Batch") } function v() { VIS.CalloutEngine.call(this, "GOM01.GetCountrySalesRep") } function y() { VIS.CalloutEngine.call(this, "GOM01.GetBatchProduct") } var p = VIS.Logging.Level, t = VIS.Utility.Util; VIS.Utility.inheritPrototype(u, VIS.CalloutEngine); u.prototype.setBOM = function (n, t, i, r, u, f) { var o; this.setCalloutActive(!0); var s = i.getValue("M_PRODUCT_ID"), h = "SELECT bo.M_BOM_ID,pr.c_uom_id FROM M_BOM bo INNER JOIN M_PRODUCT PR ON pr.m_product_id =bo.m_product_id WHERE GOM01_PRIORITY = (SELECT MIN(GOM01_PRIORITY) FROM M_BOM WHERE M_PRODUCT_ID =" + s + " ) AND pr.M_PRODUCT_ID =" + s, e = VIS.DB.executeDataSet(h); if (e != null && e.tables[0].rows.length > 0) for (o = 0; o < 1; o++) i.setValue("M_BOM_ID", e.tables[0].rows[0].cells.m_bom_id), i.setValue("C_UOM_ID", e.tables[0].rows[0].cells.c_uom_id); return this.setCalloutActive(!1), n = t = i = r = u = f = null, "" }; n.Model = n.Model || {}; n.Model.SetBOM = u; VIS.Utility.inheritPrototype(f, VIS.CalloutEngine); f.prototype.setInterestAmt = function (n, i, r, u, f) { var h, e, s; if (t.getValueOfInt(r.getValue("C_InvoicePaySchedule_ID")) > 0) { r.setValue("GOM01_InterestAmt", "0"); try { if (h = "Select DueDate From C_InvoicePaySchedule Where C_InvoicePaySchedule_ID=" + f, e = VIS.DB.executeScalar(h), r.getValue("DateTrx") > e) { var c = VIS.DB.executeScalar("Select GOM01_Rate From C_PaymentTerm Where C_PaymentTerm_ID=(Select C_PaymentTerm_ID From C_InvoicePaySchedule Where C_InvoicePaySchedule_ID=" + f + ")"), l = new Date(r.getValue("DateTrx")), e = new Date(e), a = Math.abs(l.getTime() - e.getTime()), o = Math.ceil(a / 864e5); o = o / 365; o > 0 && (s = o * c * r.getValue("payamt") / 100, s = s.toFixed(2), r.setValue("GOM01_InterestAmt", s)) } else r.setValue("GOM01_InterestAmt", "0") } catch (v) { this.setCalloutActive(!1); this.log.severe(v.toString()) } } else r.setValue("GOM01_InterestAmt", "0"); return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.Payment = f; VIS.Utility.inheritPrototype(e, VIS.CalloutEngine); e.prototype.setInterestAmount = function (n, i, r, u, f) { var c, h; if (t.getValueOfInt(r.getValue("C_InvoicePaySchedule_ID")) > 0) { r.setValue("GOM01_InterestAmt", "0"); try { var l = "Select DueDate From C_InvoicePaySchedule Where C_InvoicePaySchedule_ID=" + f, e = VIS.DB.executeScalar(l), o = VIS.DB.executeScalar("Select StatementDate From C_Cash Where C_Cash_ID=" + n.getContextAsInt(i, "C_Cash_ID")); if (o > e) { c = VIS.DB.executeScalar("Select GOM01_Rate From C_PaymentTerm Where C_PaymentTerm_ID=(Select C_PaymentTerm_ID From C_InvoicePaySchedule Where C_InvoicePaySchedule_ID=" + f + ")"); o = new Date(o); var e = new Date(e), a = Math.abs(o.getTime() - e.getTime()), s = Math.ceil(a / 864e5); s = s / 365; s > 0 && (h = s * c * r.getValue("payamt") / 100, h = h.toFixed(2), r.setValue("GOM01_InterestAmt", h)) } else r.setValue("GOM01_InterestAmt", "0") } catch (v) { this.setCalloutActive(!1); this.log.severe(v.toString()) } } else r.setValue("GOM01_InterestAmt", "0"); return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.CashJournal = e; VIS.Utility.inheritPrototype(o, VIS.CalloutEngine); o.prototype.SetDescription = function (n, t, i, r, u) { var e, o, f; if (this.isCalloutActive() || u == null) return ""; this.setCalloutActive(!0); e = i.getValue("GOM01_Testmaster_ID"); try { o = "Select Tm.description,Tm.Gom01_Testmethod_Id,Tmhd.gom01_name From Gom01_Testmaster Tm Inner Join Gom01_Testmethod Tmhd On  Tmhd.Gom01_Testmethod_Id =Tm.Gom01_Testmethod_Id WHERE Gom01_Testmaster_Id=" + e; f = VIS.DB.executeDataSet(o); i.setValue("Description", f.tables[0].rows[0].cells.description); i.setValue("GOM01_Testmethod", f.tables[0].rows[0].cells.gom01_name) } catch (s) { this.setCalloutActive(!1); this.log.severe(s.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.TestDescription = o; VIS.Utility.inheritPrototype(s, VIS.CalloutEngine); s.prototype.SetUom = function (n, t, i, r, u) { var f, e, o; if (this.isCalloutActive() || u == null) return ""; this.setCalloutActive(!0); f = i.getValue("M_PRODUCT_ID"); try { e = "SELECT Mp.c_uom_id,Um.Name FROM M_Product Mp INNER JOIN C_Uom Um On Um.c_uom_id = Mp.c_uom_id where Mp.m_product_id =" + f; o = VIS.DB.executeScalar(e); i.setValue("C_Uom_Id", o) } catch (s) { this.setCalloutActive(!1); this.log.severe(s.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.GetUom = s; VIS.Utility.inheritPrototype(h, VIS.CalloutEngine); h.prototype.SetShipDescription = function (n, i, r, u, f) { var o, s, e; if (this.isCalloutActive() || f == null) return ""; this.setCalloutActive(!0); o = r.getValue("GOM01_Testmaster_ID"); try { s = "Select Tm.description,Tm.Gom01_Testmethod_Id,Tmhd.gom01_name From Gom01_Testmaster Tm Inner Join Gom01_Testmethod Tmhd On  Tmhd.Gom01_Testmethod_Id =Tm.Gom01_Testmethod_Id WHERE Gom01_Testmaster_Id=" + o; e = VIS.DB.executeDataSet(s); r.setValue("Description", t.getValueOfString(e.tables[0].rows[0].cells.description)); r.setValue("GOM01_Testmethod", t.getValueOfString(e.tables[0].rows[0].cells.gom01_name)) } catch (h) { this.setCalloutActive(!1); this.log.severe(h.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.ShipDescription = h; VIS.Utility.inheritPrototype(r, VIS.CalloutEngine); r.prototype.SetQtyInKg = function (n, t, i, r, u) { var f, e, o, s; if (this.isCalloutActive() || u == null) return ""; this.setCalloutActive(!0); f = 0; e = r.getColumnName(); try { e == "VAMFG_QtyEntered" ? (o = i.getValue("GOM01_Density"), f = o * u) : (s = i.getValue("VAMFG_QtyEntered"), f = s * u); i.setValue("GOM01_Quantity", f) } catch (h) { this.setCalloutActive(!1); this.log.severe(h.toString()) } return this.setCalloutActive(!1), "" }; r.prototype.SetDensityRange = function (n, i, r, u, f) { if (this.isCalloutActive() || f == null) return ""; try { var e = VIS.dataContext.getJSONRecord("GOM01_Common/GetProductDensity", f.toString()); r.setValue("GOM01_MaxDensity", t.getValueOfDecimal(e.GOM01_MaxDensity)); r.setValue("GOM01_MinDensity", t.getValueOfDecimal(e.GOM01_MinDensity)) } catch (o) { this.setCalloutActive(!1); this.log.severe(o.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.CalloutProductionOrder = r; VIS.Utility.inheritPrototype(i, VIS.CalloutEngine); i.prototype.SetDensity = function (n, t, i, r, u) { var f, o, e; if (this.isCalloutActive() || u == null) return ""; this.setCalloutActive(!0); f = 0; o = r.getColumnName(); try { e = "SELECT GOM01_Density FROM VAMFG_M_WorkOrder WHERE VAMFG_M_WorkOrder_ID =" + u; f = VIS.Utility.Util.getValueOfDecimal(VIS.DB.executeScalar(e)); i.setValue("GOM01_Density", f) } catch (s) { this.setCalloutActive(!1); this.log.severe(s.toString()) } return this.setCalloutActive(!1), "" }; i.prototype.SetQtyLiter = function (n, i, r, u, f) { var e, h, c; if (this.isCalloutActive() || f == null || (e = t.getValueOfInt(r.getValue("C_UOM_ID")), 0 == e)) return ""; this.setCalloutActive(!0); var o = VIS.Utility.Util.getValueOfDecimal(f), l = r.getValue("GOM01_ActualQuantity"), s = 0; try { o > 0 && (s = l / o); h = VIS.dataContext.getJSONRecord("GOM01_UOM/GetPrecision", e.toString()); c = s.toFixed(h); r.setValue("GOM01_ActualLiter", c) } catch (a) { this.setCalloutActive(!1); this.log.severe(a.toString()) } return this.setCalloutActive(!1), "" }; i.prototype.SetDensityRange = function (n, i, r, u, f) { if (this.isCalloutActive() || f == null) return ""; try { var e = VIS.dataContext.getJSONRecord("GOM01_Common/GetDensity", f.toString()); r.setValue("GOM01_MaxDensity", t.getValueOfDecimal(e.GOM01_MaxDensity)); r.setValue("GOM01_MinDensity", t.getValueOfDecimal(e.GOM01_MinDensity)) } catch (o) { this.setCalloutActive(!1); this.log.severe(o.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.CalloutProductionExecution = i; VIS.Utility.inheritPrototype(c, VIS.CalloutEngine); c.prototype.GOM01_GetProductDesc = function (n, i, r, u, f) { var s, h, e, o; if (this.isCalloutActive() || f == null) return ""; this.setCalloutActive(!0); s = r.getValue("M_PRODUCT_ID"); try { if (h = "SELECT value, description FROM M_Product  where m_product_id =" + s, e = VIS.DB.executeDataSet(h), e != null && e.tables[0].rows.length > 0) for (o = 0; o < 1; o++) r.setValue("GOM01_ItemDescription", t.getValueOfString(e.tables[0].rows[0].cells.description)), r.setValue("GOM01_ItemCode", t.getValueOfString(e.tables[0].rows[0].cells.value)) } catch (c) { this.setCalloutActive(!1); this.log.severe(c.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.GetProductCode = c; VIS.Utility.inheritPrototype(l, VIS.CalloutEngine); l.prototype.GOM01_GetCostMethod = function (n, t, i, r, u) { if (this.isCalloutActive() || u == null) return ""; try { this.setCalloutActive(!0); i.setValue("FRPT_COSTINGMETHOD", u); this.setCalloutActive(!1) } catch (f) { this.setCalloutActive(!1); this.log.severe(f.toString()) } return "" }; n.Model = n.Model || {}; n.Model.GetCostMethod = l; VIS.Utility.inheritPrototype(a, VIS.CalloutEngine); a.prototype.SetProduct = function (n, i, r, u, f) { var o, e; if (this.isCalloutActive() || f == null) return ""; if (this.setCalloutActive(!0), u.getColumnName() == "VAMFG_M_WrkOdrTransaction_ID") { o = "select M_product_ID,VAMFG_DateTrx from VAMFG_M_WrkOdrTransaction where VAMFG_M_WrkOdrTransaction_id=" + f; try { e = VIS.DB.executeDataSet(o); r.setValue("M_Product_ID", t.getValueOfString(e.tables[0].rows[0].cells.m_product_id)); r.setValue("GOM01_MfgDate", t.getValueOfString(e.tables[0].rows[0].cells.vamfg_datetrx)) } catch (s) { this.setCalloutActive(!1); this.log.severe(s.toString()) } } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.Batch = a; VIS.Utility.inheritPrototype(v, VIS.CalloutEngine); v.prototype.SetCountrySalesRep = function (n, t, i, r, u, f) { var h, e; if (this.isCalloutActive() || u == null) return i.setValue("C_Country_ID", 0), i.getKeyColumnName() == "VAMRP_ForecastLine_ID" && i.setValue("SalesRep_ID", 0), ""; this.setCalloutActive(!0); var s = n.getContextAsInt(t, "C_BPartner_ID"), c = n.getContextAsInt(t, "AD_Client_ID"), o = !1; if (i.getKeyColumnName() == "VAMRP_ForecastLine_ID" && (o = !0), s == 0) return i.setValue("C_Country_ID", 0), o && i.setValue("SalesRep_ID", 0), this.setCalloutActive(!1), n = t = i = r = u = f = null, ""; try { h = s.toString().concat(",", c.toString()); e = VIS.dataContext.getJSONRecord("GOM01_ForecastLine/GetCountryAndRep", h); e != null && (i.setValue("C_Country_ID", e.C_Country_ID), o && i.setValue("SalesRep_ID", e.SalesRep_ID)) } catch (l) { this.setCalloutActive(!1); this.log.severe(l.toString()) } return this.setCalloutActive(!1), "" }; n.Model = n.Model || {}; n.Model.GetCountrySalesRep = v; VIS.Utility.inheritPrototype(y, VIS.CalloutEngine); y.prototype.GOM01_GetBatchProduct = function (n, i, r, u, f) { if (this.isCalloutActive() || f == null || f.toString() == "") return ""; try { if (this.setCalloutActive(!0), t.getValueOfString(r.getValue("GOM01_DocumentType")) == "F" && u.getColumnName() == "M_Production_ID") { var e = f.toString(), o = VIS.dataContext.getJSONRecord("QCResult/GetpoductionProduct", e); r.setValue("M_Product_ID", o) } else r.setValue("M_Product_ID", ""); this.setCalloutActive(!1) } catch (s) { this.setCalloutActive(!1); this.log.severe(s.toString()) } return "" }; n.Model = n.Model || {}; n.Model.GetBatchProduct = y }(GOM01, jQuery)